<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <style>
      body {
        position: absolute;
        font: 13px Helvetica, Arial;
        height: 100%;
        width: 100%;
      }
      .nickname {
        font-size: 25vw;
        display: inline-block;
      }
      .message {
        font-size: 12vw;
        display: inline-block;
        padding: 60px;
      }
      div.footer {
        position: inherit;
        text-align: right;
        padding: 40px;
        bottom: 0;
        right: 0;
      }
      label.footer {
        font-size: 6vw;
      }
      .content {
        position: inherit;
        text-align: center;
        height: 85%;
        width: 100%;
        padding-top: 200px;
      }
    </style>
  </head>
  <body>
    <script src="../js/socket.io-1.2.0.js"></script>
    <script src="../js/jquery-1.11.1.js"></script>
    <script src="../js/jquery-cookie-1.4.1.js"></script>
    <script>
    function gameStarted(data) {
      console.log(data);
      $('#message').text('Started');
    }

    function onJoinedSuccess(playerInfo) {
      console.log(playerInfo);
      $('#message').text('Waiting for Game to Start');
    }

    $(document).ready(function () {
      var user = JSON.parse($.cookie('user'));
      $('#nickname').text(user.nickname);
      $('#roomId').text(user.roomId);
      var location = window.location;
      var socket = io(location.protocol + '//' + location.hostname +
          (location.port ? ':'+location.port: '') + '/' + user.roomId, {
            "name": user.nickname,
          });
      socket.on('startGame', gameStarted);
      socket.on('playerJoinedRoom', onJoinedSuccess);
    });
    </script>
    <div class="content">
      <label id="nickname" class="nickname"></label>
      <label id="message" class="message">Joining Game</label>
    </div>
    <div class="footer">
      <label class="footer">Room Code: </label>
      <label class="footer" id="roomId"></label>
    </div>
  </body>
</html>
